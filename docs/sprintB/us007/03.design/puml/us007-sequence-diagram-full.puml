@startuml
skinparam monochrome true
skinparam packageStyle rectangle
skinparam shadowing false

autonumber

'hide footbox
actor "UnregisteredUser" as UU
participant ":CreateUserUI" as UI
participant ":CreateUserController" as CTRL
participant ":User" as user
participant ":UserRepositories" as UR
participant ":Repositories" as R
participant ":name\nString" as name
participant "passportCardNumber\nInteger" as PCN
participant "taxNumber" as T
participant "emailAddress\nString" as EA
participant "address\nString" as A
participant "phoneNumber" as PN
participant "password" as P

activate UU

        UU -> UI : asks to register in the system

        activate UI

            UI --> UU : requests data (name, passportCardNumber, taxNumber,\n emailAddress, address, phoneNumber, password)

    deactivate UI
    UU -> UI : inserts data
    activate UI

    UI -> CTRL : create user (name, passportCardNumber, taxNumber,\n emailAddress, address, phoneNumber, password)
    activate CTRL

    CTRL -> user : create user (name, passportCardNumber, taxNumber,\n emailAddress, address, phoneNumber, password)
    activate user
    CTRL -> CTRL : validateUser()

    deactivate user

        UI --> UU : shows all the data inserted \nand asks for confirmation
        deactivate CTRL
    deactivate UI

    UU -> UI : confirms data
    activate UI

    UI -> CTRL : saveUser(user)
    activate CTRL

    CTRL -> R

    activate R

    R --> UR : addUser(user)
    deactivate R
    activate UR

    deactivate UR

    deactivate R
        UI --> UU : shows confirmation of successful registration
        deactivate CTRL
    deactivate UI

deactivate UU

@enduml